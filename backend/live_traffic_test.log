INFO:__main__:Testing real-time traffic logging with frontend integration...
INFO:__main__:üîÑ This will generate live JSON data that the frontend can display
INFO:video_processor_with_loops:Loading YOLO model from: /home/roboticslab/City College Dropbox/BO SHANG/gsv_truck/2025/ws/runs/best.pt
INFO:video_processor_with_loops:Model loaded successfully
INFO:video_processor_with_loops:Model classes: {0: 'Ped', 1: 'Bk/Mc', 2: 'PC', 3: 'Bus', 4: 'Truck', 5: 'Unknown', 6: 'trailer'}
INFO:virtual_loop:Added virtual loop: Side_Street_Traffic with 4 points
INFO:video_processor_with_loops:Initialized 1 virtual loops for 74th-Amsterdam-Columbus
INFO:video_processor_with_loops:Processing video with virtual loops: videos/74th-Amsterdam-Columbus_test_30sec.mp4
INFO:video_processor_with_loops:Video specs: 1920x1080, 29fps, 899 frames
INFO:video_processor_with_loops:Added exclusion zone: {'x1': 1715, 'y1': 347, 'x2': 1915, 'y2': 547}
INFO:video_processor_with_loops:Starting frame-by-frame processing...
WARNING ‚ö†Ô∏è NMS time limit 0.550s exceeded
INFO:virtual_loop:Loop Side_Street_Traffic: Vehicle 2 (PC) crossed entry at frame 187 - COUNT: 1
INFO:virtual_loop:Loop Side_Street_Traffic: Vehicle 10 (PC) crossed entry at frame 243 - COUNT: 2
INFO:video_processor_with_loops:Progress: 32.3% (290/899), ETA: 69.9s
INFO:video_processor_with_loops:Progress: 64.5% (580/899), ETA: 25.9s
INFO:video_processor_with_loops:Progress: 96.8% (870/899), ETA: 2.0s
INFO:video_processor_with_loops:Converting to web-compatible MP4 format...
INFO:video_processor_with_loops:Exporting traffic data to JSON...
INFO:virtual_loop:Exported traffic data to processed_videos/live_traffic_demo.json
INFO:virtual_loop:Total crossings: 2
INFO:virtual_loop:Time intervals: 1
INFO:video_processor_with_loops:Traffic counting summary:
INFO:video_processor_with_loops:  Total crossings: 2
INFO:video_processor_with_loops:  Crossings by class: {'PC': 2}
INFO:video_processor_with_loops:  Crossings by loop: {'Side_Street_Traffic': 2}
INFO:video_processor_with_loops:‚úÖ Processing completed in 73.1s
INFO:video_processor_with_loops:‚úÖ Video saved: processed_videos/live_traffic_demo.mp4
INFO:video_processor_with_loops:‚úÖ Data saved: processed_videos/live_traffic_demo.json
INFO:video_processor_with_loops:Output video size: 17.7 MB
INFO:video_processor_with_loops:Output JSON size: 1.3 KB
INFO:__main__:‚úÖ Live traffic logging test completed successfully!
INFO:__main__:‚úÖ Demo video created: 17.7 MB
INFO:__main__:üé• Video URL: https://classificationbackend.boshang.online/processed-videos/live_traffic_demo.mp4
INFO:__main__:‚úÖ Live traffic data created: 1.3 KB
INFO:__main__:üìä API URL: http://classificationbackend.boshang.online/live-traffic/74th-Amsterdam-Columbus
INFO:__main__:
üìä Live traffic data summary:
INFO:__main__:  Status: completed
INFO:__main__:  Total vehicles: 2
INFO:__main__:  Vehicle types: {'PC': 2}
INFO:__main__:  Vehicles per minute: 3.81
INFO:__main__:  Time intervals: 2
INFO:__main__:  Recent detections: 2
INFO:__main__:
üìà Processing summary:
INFO:__main__:  Processing time: 1.2 minutes
INFO:__main__:  Average rate: 1.63 vehicles/minute
INFO:__main__:  Peak interval: 1 vehicles
INFO:__main__:
üéØ Live traffic logging features:
INFO:__main__:  ‚Ä¢ Real-time JSON updates during video processing
INFO:__main__:  ‚Ä¢ 15-second interval aggregation for traffic patterns
INFO:__main__:  ‚Ä¢ Vehicle type distribution tracking
INFO:__main__:  ‚Ä¢ Recent detections with tracking IDs
INFO:__main__:  ‚Ä¢ Traffic rate calculations (vehicles/minute)
INFO:__main__:  ‚Ä¢ Frontend auto-refresh capabilities
INFO:__main__:
üåê Frontend Integration:
INFO:__main__:  ‚Ä¢ Visit https://asdfghjklzxcvbnm.aimobilitylab.xyz/
INFO:__main__:  ‚Ä¢ Select '74th‚ÄìAmsterdam‚ÄìColumbus' location
INFO:__main__:  ‚Ä¢ View 'Live Traffic Distribution' chart
INFO:__main__:  ‚Ä¢ See real-time traffic patterns and vehicle types
INFO:__main__:
üö¶ Perfect for monitoring traffic distribution over time!
